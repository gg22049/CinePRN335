<?xml version="1.0" encoding="UTF-8"?>

<fc:composition xmlns="http://www.w3.org/1999/xhtml"
               xmlns:p="http://primefaces.org/ui"
               xmlns:h="jakarta.faces.html"
               xmlns:fc="jakarta.faces.facelets"
               template="WEB-INF/templates/principal.xhtml"
               xmlns:f="jakarta.faces.core"
               xmlns:crud="jakarta.faces.composite/crud"
               xmlns:datos="jakarta.faces.composite/datos">

    <f:view>
        <f:metadata>
            <f:viewAction action="#{sesionUsuario.aplicarIdioma()}"/>
        </f:metadata>
    </f:view>

    <fc:define name="titulo">
        #{frmReserva.titulo}
    </fc:define>

    <fc:define name="cuerpo">

        <h:form id="reservaFrm">

            <p:growl id="growl" sticky="true" showDetail="true"/>

            <p:wizard flowListener="#{reservaWizardBean.onFlowProcess}">

                <!-- Ejemplo-->
                <p:tab id="EjemploID1" title="Ejemplo de ID1">
                    <p:panel>
                        <p:messages/>
                        <h:panelGrid columns="1">
                            <h:outputText value="ID Programación"/>
                            <h:outputText value="Nombre:"/>
                            <h:outputText value="Tipo de Reserva xd"/>
                            <h:outputText value="Observaciones: #{frmReserva.registro.observaciones}"/>
                            <h:outputText value="Asientos"/>
                            <!--
                            <h:outputText value="Ejemplo de Id Programacion"/>
                            <h:inputText value="#{reservaWizardBean.registro.idProgramacion.idProgramacion}" required="true" requiredMessage="Advertencia: Ingrese un id de Programación!!!."/>
                            <h:outputText value="Ejemplo de Id TipoReserva"/>
                            <h:inputText value="#{reservaWizardBean.registro.idTipoReserva.idTipoReserva}"/>
                            <h:outputText value="Observaciones"/>
                            <h:inputText value="#{reservaWizardBean.registro.observaciones}"/>
                            -->
                        </h:panelGrid>
                    </p:panel>
                </p:tab>

                <p:tab id="EjemploID2" title="Ejemplo de ID2">
                    <p:panel>
                        <p:messages/>
                        <h:panelGrid columns="1">
                            <h:outputText value="ID Programación"/>
                            <h:outputText value="Nombre:"/>
                            <h:outputText value="Tipo de Reserva"/>
                            <h:outputText value="Observaciones"/>
                            <h:outputText value="Asientos"/>
                            <!--
                            <h:outputText value="Ejemplo de Id Programacion"/>
                            <h:inputText value="#{reservaWizardBean.registro.idProgramacion.idProgramacion}" required="true" requiredMessage="Advertencia: Ingrese un id de Programación!!!."/>
                            <h:outputText value="Ejemplo de Id TipoReserva"/>
                            <h:inputText value="#{reservaWizardBean.registro.idTipoReserva.idTipoReserva}"/>
                            <h:outputText value="Observaciones"/>
                            <h:inputText value="#{reservaWizardBean.registro.observaciones}"/>
                            -->
                        </h:panelGrid>
                    </p:panel>
                </p:tab>

                <!-- Ejemplo-->
                <p:tab id="EjemploID3" title="Ejemplo de ID3">
                    <p:panel>
                        <p:messages/>
                        <h:panelGrid columns="2">
                            <h:outputText value="Ejemplo de Id TipoReserva"/>
                            <h:inputText value="#{reservaWizardBean.registro.idTipoReserva.idTipoReserva}"/>
                            <h:outputText value="Ejemplo de Id TipoReserva"/>
                            <h:outputText value="#{reservaWizardBean.registro.idTipoReserva.idTipoReserva}"/>
                            <h:outputText value="Observaciones"/>
                            <h:inputText value="#{reservaWizardBean.registro.observaciones}"/>
                        </h:panelGrid>
                    </p:panel>
                </p:tab>


                <!-- Paso 1: Fecha y Tipo de Reserva, formato de fecha no compatible -->
                <!-- 2024-09-19 20:26:00+00-->
                <p:tab id="fecha" title="Fecha">
                    <p:panel header="Seleccionar Fecha">
                        <p:messages/>
                        <h:outputText value="Id Tipo Reserva: #{reservaWizardBean.registro.idTipoReserva.idTipoReserva}"/>
                        <h:panelGrid columns="2">
                            <h:outputText value="Seleccione día: *"/>
                            <p:calendar value="#{reservaWizardBean.registro.fechaReserva}"
                                        label="Seleccione un día" required="true"
                                        pattern="yyyy-MM-dd HH:mm:ssXXX"
                                        showButtonPanel="true" mindate="#{reservaWizardBean.minDate}"/>
                            <h:outputText value="Tipo de Reserva: *"/>
                            <p:selectOneMenu id="tipoReservaOption" value="#{reservaWizardBean.registro.idTipoReserva.idTipoReserva}" ajax="true" process="@form">
                                <f:selectItems value="#{reservaWizardBean.tiposReserva}" var="reserva" itemLabel="#{reserva.nombre}" itemValue="#{reserva.idTipoReserva}" />
                            </p:selectOneMenu>
                        </h:panelGrid>
                    </p:panel>
                </p:tab>

                <!-- Paso 2: Seleccionar una programción -->
                <p:tab id="funcion" title="Función">
                    <p:panel header="Seleccionar Función">
                        <p:messages/>
                        <h:panelGrid columns="2" columnClasses="label, value">
                            <h:outputText value="Seleccione función: "/>
                            <p:selectOneMenu id="programacionOption" value="#{reservaWizardBean.reserva.idProgramacion}" ajax="true" process="@form" update="sinopsisPanel">
                                <f:selectItems value="#{frmProgramacion.programacionesDelDia}" var="prn" itemLabel="#{prn.idPelicula.nombre}, #{prn.idSala.nombre}, #{prn.idSala.idSucursal.nombre}, (#{prn.desde} - #{prn.hasta})" itemValue="#{prn.idProgramacion}" />
                            </p:selectOneMenu>
                        </h:panelGrid>

                        <h:panelGrid id="sinopsisPanel" columns="1">

                        </h:panelGrid>
                    </p:panel>
                </p:tab>


                <p:tab id="asientos" title="Asientos">
                    <p:panel header="Asientos">
                        <p:messages/>
                        <h:panelGrid columns="2" columnClasses="label, value">

                        </h:panelGrid>
                    </p:panel>
                </p:tab>

                <p:tab id="confirm" title="Confirmation">
                    <p:panel header="Confirmation">
                        <h:panelGrid id="confirmation" columns="3" columnClasses="grid,grid,grid">

                        </h:panelGrid>

                        <p:commandButton value="Submit" action="#{reservaWizardBean.save}" update="growl" process="@form"/>
                    </p:panel>
                </p:tab>
            </p:wizard>
        </h:form>
    </fc:define>

</fc:composition>